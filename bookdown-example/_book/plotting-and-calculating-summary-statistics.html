<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Plotting and calculating summary statistics | RAP Workshop</title>
<meta name="author" content="Data Science Team">
<meta name="description" content="This page will take you through the steps for the data analysis we wish to do. It will comprise of manipulating and plotting data and generating statistics.  2.1 Reading in the data We start by...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Chapter 2 Plotting and calculating summary statistics | RAP Workshop">
<meta property="og:type" content="book">
<meta property="og:description" content="This page will take you through the steps for the data analysis we wish to do. It will comprise of manipulating and plotting data and generating statistics.  2.1 Reading in the data We start by...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Plotting and calculating summary statistics | RAP Workshop">
<meta name="twitter:description" content="This page will take you through the steps for the data analysis we wish to do. It will comprise of manipulating and plotting data and generating statistics.  2.1 Reading in the data We start by...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">RAP Workshop</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> RAP Workshop</a></li>
<li><a class="active" href="plotting-and-calculating-summary-statistics.html"><span class="header-section-number">2</span> Plotting and calculating summary statistics</a></li>
<li><a class="" href="exercise.html"><span class="header-section-number">3</span> Exercise</a></li>
<li><a class="" href="exercise-solution.html"><span class="header-section-number">4</span> Exercise solution</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="plotting-and-calculating-summary-statistics" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Plotting and calculating summary statistics<a class="anchor" aria-label="anchor" href="#plotting-and-calculating-summary-statistics"><i class="fas fa-link"></i></a>
</h1>
<p>This page will take you through the steps for the data analysis we wish to do. It will comprise of manipulating and plotting data and generating statistics.</p>
<div id="reading-in-the-data" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Reading in the data<a class="anchor" aria-label="anchor" href="#reading-in-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>We start by reading in two libraries:</p>
<pre><code><a href="https://dplyr.tidyverse.org">library(dplyr)
library(readr)</a></code></pre>
<p>First, we can print the column names of the dataset and the unique industry types in the dataset.</p>
<pre><code># print columns
print(colnames(df))

# print industry types
print(unique(df$UnofficialStandardIndustrialClassification))</code></pre>
</div>
<div id="filtering-data" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Filtering data<a class="anchor" aria-label="anchor" href="#filtering-data"><i class="fas fa-link"></i></a>
</h2>
<p>We will now clean the data and filter for data on the health and social care industry in England and by type of growth rate we wish to analyse.</p>
<pre><code># remove NAs, filter by industry, geography and growth rate figure
health_gdp_time_series &lt;- df %&gt;%
  filter(!is.na(v4_1)) %&gt;%
  filter(UnofficialStandardIndustrialClassification == "Q: Human health and social work activities") %&gt;%
  filter(Geography == "England") %&gt;%
  filter(GrowthRate == "Annual growth rate")</code></pre>
<p>We can then set the year column as a number to allow plotting of the data to be straightforward. Note, the “v4_1” column are the values we will look to plot later.</p>
<pre><code># set year as a number and sort by
health_gdp_time_series_sorted &lt;- health_gdp_time_series %&gt;%
  mutate(Time = as.numeric(Time)) %&gt;%
  arrange(Time)</code></pre>
<p>Once we have a cleaned dataset, we can save it as a csv for future use.</p>
<pre><code># save data to csv
write_csv(
  health_gdp_time_series_sorted,
  file = "./output/health_gdp_time_series_sorted.csv")</code></pre>
</div>
<div id="plotting-data" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Plotting data<a class="anchor" aria-label="anchor" href="#plotting-data"><i class="fas fa-link"></i></a>
</h2>
<p>Now we will plot the data using ggplot2.</p>
<p>We read in ggplot2:</p>
<pre><code><a href="https://ggplot2.tidyverse.org">library(ggplot2)</a></code></pre>
<p>Here we set up the plot - reading in DHSC colours, plotting a line of the values and set the chart labels.</p>
<pre><code># plot

ggplot(data = df,
       aes(Time,
           v4_1,
           colour = UnofficialStandardIndustrialClassification)) +
  DHSCcolours::theme_dhsc() +
  geom_line(linewidth = 1) +
  geom_point(size = 3) +
  theme(legend.position="none") +
  DHSCcolours::scale_colour_dhsc_d() +
  labs(
    title = "Annual growth rate of Human health and social work activities, England",
    subtitle = "2023-2021",
    x = "Year",
    y = "Annual growth rate (%)") +
  scale_x_continuous(breaks=seq(2013,2021,1))</code></pre>
<p>And save the plot</p>
<pre><code># save the plot
ggsave("./output/health_gdp_chart.svg",
         height = 5,
         width = 10,
         units="in",
         dpi=300)</code></pre>
<p>It will look like this:</p>
<div class="figure">
<img src="health_gdp_chart.svg" alt=""><p class="caption">alt text</p>
</div>
</div>
<div id="generating-summary-stats" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Generating summary stats<a class="anchor" aria-label="anchor" href="#generating-summary-stats"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, we will generate some summary statistics of the dataset.</p>
<pre><code><a href="https://dplyr.tidyverse.org">library(dplyr)</a></code></pre>
<p>We calculate various stats:</p>
<pre><code># get stats

minimum &lt;- min(df$v4_1)
maximum &lt;- max(df$v4_1)
average &lt;- mean(df$v4_1)</code></pre>
<p>We then want to filter the dataset on the maximum and minimum values to find the year in which these occurred.</p>
<p>We start by creating a list where the now already defined variables for maximum and minimum are mapped to a string, which we can print in the output i.e. set the max value to the string “maximum”.</p>
<p>We then loop over these values, retrieve the numerical value, filter on the dataset and pull the year figures out. We then print these values along with the average already calculated.</p>
<pre><code>stats = list("minimum" = minimum,
             "maximum"= maximum)

# get week values for stats, print

for (name in names(stats)) {
  stat_value = stats[[name]]

  year_val &lt;- df %&gt;%
    filter(v4_1 == stats[[name]]) %&gt;%
    select(Time) %&gt;%
    pull

  print(paste("the ",name, "value is", stat_value, "(year:", year_val, ")"))
}

print(paste("the average value is",round(average,1)))</code></pre>
<p>This gives us some basic information about the dataset.</p>
<p>In the next section, you’ll use these techniques to perform your own analysis on a different dataset, which you will then take on to generate into a RAP project.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html"><span class="header-section-number">1</span> RAP Workshop</a></div>
<div class="next"><a href="exercise.html"><span class="header-section-number">3</span> Exercise</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#plotting-and-calculating-summary-statistics"><span class="header-section-number">2</span> Plotting and calculating summary statistics</a></li>
<li><a class="nav-link" href="#reading-in-the-data"><span class="header-section-number">2.1</span> Reading in the data</a></li>
<li><a class="nav-link" href="#filtering-data"><span class="header-section-number">2.2</span> Filtering data</a></li>
<li><a class="nav-link" href="#plotting-data"><span class="header-section-number">2.3</span> Plotting data</a></li>
<li><a class="nav-link" href="#generating-summary-stats"><span class="header-section-number">2.4</span> Generating summary stats</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/01-plots-summary.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/01-plots-summary.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>RAP Workshop</strong>" was written by Data Science Team. It was last built on 2023-09-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
